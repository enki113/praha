# 課題１

## ヘッダーの意味と、役割説明

### クッキーとは・・・

- `サーバ`から`ブラウザ`に送信され、ブラウザに保存される小さなデータのこと。

  ブラウザ(クライアント)からのリクエスト後、レスポンスの際に `Set-Cookie`ヘッダを付与ことで送信される。

  以降、クライアントからサーバへはこの保存された Cookie と共にリクエストが行われる。
  この Cookie は主にユーザーの識別子として用いられる。

### hoge.com:8080 のクッキーは・・・

- ドメインが異なるので送信されない。

### hoge.com:8080 のクッキーは・・・

- 同一ドメインなので送信される。

### www.hoge.comで発行された・・・

- 送信されない。サブドメインは別ホストとして扱われるため。

### クッキーに Domain="hoge.com"を指定した場合・・・

- 送信される。Domain 属性が設定されるとサブドメインに対しても Cookie が送信されるようになる。

### ブラウザで実行される JavaScript は場合によっては・・・

- 可能。`HttpOnly`属性を付与する。

```
HttpOnly 属性を持つクッキーは、JavaScript の Document.cookie API にはアクセスできません。サーバーに送信されるだけです。例えば、サーバー側のセッションを持続させるクッキーは JavaScript が利用する必要はないので、 HttpOnly 属性をつけるべきです。
```

参考:https://developer.mozilla.org/ja/docs/Web/HTTP/Cookies

### HTTPS（暗号化）通信の時だけ・・・

- 可能。`Secure`属性を付与する。

### クッキーに Expires を設定すると、・・・

- 有効期限が設定されることになり、期限超過した Cookie は無効になる(削除される)。

### SameSite 属性について

- オリジン間の Cookie の送信制限を行うことができる。

  - `Strict` : 同一ドメインのみ
  - `Lax` : top-level navigation 且つ GET であれば、他のドメインへのリクエストであっても Cookie を付与する<br>
    (top-level navigation: アドレスバーに表示されている URL の変更が伴う遷移)

  - `None `: 全ての場合で Cookie を付与する

### クッキーに格納しない方が良い情報

- `プライバシーに関わる情報` : ユーザの個人情報など
- `セキュリティに関する情報` : パスワードや、システム内部の情報など
- `クライアントに持たせるべきでない不必要な情報` : クラサバ間の通信データ量が無意味に増加させてしまう恐れのあるもの

### クッキーはローカルストレージと混同・・・

- Cookie を使うべきタイミング
  - セッション ID や JWT などのトークンのようなセキュアな情報を保存したい場合。
- localStorage を使うべきタイミング
  - 機密情報ではなく、かつブラウザに保存するにはデータ量が多いものを保存する場合。

### stack overflow のような WEB 掲示板サービス・・・

#### 仕組み

- 被攻撃対象のユーザが、悪意のあるスクリプトが書き込まれたサイトへのリンクをクリックした結果、そのスクリプトが実行されてしまい、Cookie 情報が流出する。

#### 対策

- 入力文字を適切にエスケープ処理する(サニタイジング)すること。

# 課題 2

1. あるリクエストに対して`「2021/6/1/00:00:00 GMT」`に返却されたレスポンスにて、`Set-Cookie`ヘッダに`Max-Age`属性と`Expire`属性の双方が指定されていました。
   この時`Max-age=86400`、`expires=Thu, 3 Jun 2021 00:00:00 GMT`だった場合、Cookie の有効期限はいつまでになるでしょうか？(回答は GMT でも JST でも大丈夫です)

2. Cookie の属性を以下のように設定するように制限するために Cookie 名に付与すべき prefix は何でしょうか？

- Domain 属性が付いていてはいけない
- Path 属性が"/"でなければならない
- Secure 属性がついてなければならない

3. SameSite 属性のデフォルト値を答えてください。また、モダンブラウザで現在そのようにデフォルト値とされている理由を簡単に述べてください。
