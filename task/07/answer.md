# 課題 1

### 何故キャッシュが必要か

キャッシュ概要: Web サービス・Web サイトで提供されているコンテンツを保存して再利用する仕組み

キャッシュを用いることで、クライアント<=>サーバ間や、サーバ<=>DB 間の通信の速度を改善したり、負荷の解消に役立つ。

(特に大量のアクセスを見込む大規模サービスの場合、キャッシュを適切に使用しなければ全てのアクセスが DB を通ることになりサーバリソースが枯渇する可能性も高まります)

### キャッシュの種類とその説明

代表的なものとして３点挙げます

#### ブラウザキャッシュ

ブラウザがアクセスして取得したコンテンツデータ（画像や HTML など）を保管する仕組み。

#### プロキシキャッシュ

本来の Web サーバーの前にプロキシ用のサーバを置き、そこでリクエストで得られたファイルをキャッシュすることで複数ユーザーに対してキャッシュコンテンツの配信を行う仕組み。

#### サーバー/アプリキャッシュ

DB へのクエリ結果などをアプリケーションが稼働しているサーバー上(ファイルやオンメモリ)にキャッシングさせる仕組み。
Redis 等の各サーバとは独立したインメモリデータストアに保存することで、複数サーバからの参照も可能にすることが可能。

### ブラウザがキャッシュを制御するために存在する HTTP ヘッダー 3 つ以上&役割

#### Cache-Control

HTTP/1.1 で 追加された、キャッシュの「振る舞い」を定義するヘッダー。no-store で「キャッシュの禁止」を指示したり、max-age で相対時間でのキャッシュ有効時間を設定することが可能。

#### Expires

キャッシュの有効期間を定義するヘッダー。(Cache-Control: max-age と同じ)
有効期限は最大約 1 年が推奨される。

#### ETag

ファイルに更新が有るか否かを確認するためのヘッダー。
サーバがこの値を参照することでリソースが更新されているかどうかを判断し、コンテンツデータの再送するか否かを決定する。

(Cache-Control ヘッダーや Expires ヘッダーと同時に配信された場合は、Cache-Control ヘッダーや Expires ヘッダーが優先される)

参考リンク: https://aimstogeek.hatenablog.com/entry/2018/01/17/154537
